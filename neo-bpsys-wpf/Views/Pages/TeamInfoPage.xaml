<Page
    x:Class="neo_bpsys_wpf.Views.Pages.TeamInfoPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:cc="clr-namespace:neo_bpsys_wpf.Controls"
    xmlns:cv="clr-namespace:neo_bpsys_wpf.Converters"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:i="http://schemas.microsoft.com/xaml/behaviors"
    xmlns:lang="clr-namespace:neo_bpsys_wpf.Assets.Locales"
    xmlns:local="clr-namespace:neo_bpsys_wpf.Views.Pages"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:ui="http://schemas.lepo.co/wpfui/2022/xaml"
    xmlns:vm="clr-namespace:neo_bpsys_wpf.ViewModels.Pages"
    Title="TeamInfoPage"
    d:DataContext="{d:DesignInstance Type=vm:TeamInfoPageViewModel,
                                     IsDesignTimeCreatable=True}"
    d:DesignHeight="2000"
    d:DesignWidth="685"
    ui:Design.Foreground="{DynamicResource TextFillColorPrimaryBrush}"
    Foreground="{DynamicResource TextFillColorPrimaryBrush}"
    mc:Ignorable="d">
    <Page.Resources>
        <cv:CampToStringConverter x:Key="CampToStringConverter" />
        <cv:BooleanToReverseVisibilityConverter x:Key="BooleanToReverseVisibilityConverter" />
        <BooleanToVisibilityConverter x:Key="BooleanToVisibilityConverter" />
    </Page.Resources>
    <WrapPanel Orientation="Horizontal">
        <Border Style="{StaticResource Card}">
            <StackPanel>
                <TextBlock Text="第五人格赛事统一平台接口对接" />
                <StackPanel Orientation="Horizontal" Margin="0,8,0,0">
                    <ui:TextBox Width="180" PlaceholderText="邮箱" Text="{Binding Email}" />
                    <ui:TextBox Width="160" Margin="10,0,0,0" PlaceholderText="密码" Text="{Binding Password}" />
                    <ui:Button Margin="10,0,0,0" Content="登录" Icon="{ui:SymbolIcon Symbol=ArrowImport24}" Command="{Binding LoginCommand}" />
                    <TextBlock Margin="10,0,0,0" VerticalAlignment="Center" Text="已登录" Visibility="{Binding IsLoggedIn, Converter={StaticResource BooleanToVisibilityConverter}}" />
                </StackPanel>

                <StackPanel Orientation="Horizontal" Margin="0,8,0,0">
                    <ui:TextBox Width="300" PlaceholderText="搜索赛事关键词" Text="{Binding EventQuery}" />
                    <ui:Button Margin="10,0,0,0" Content="搜索赛事" Icon="{ui:SymbolIcon Symbol=Search24}" Command="{Binding SearchEventsCommand}" />
                    <ui:Button Margin="10,0,0,0" Content="加载赛程" Icon="{ui:SymbolIcon Symbol=ArrowSort24}" Command="{Binding LoadMatchesCommand}" />
                    <ui:Button Margin="10,0,0,0" Content="导入选中赛程两队信息" Icon="{ui:SymbolIcon Symbol=ArrowImport24}" Command="{Binding ImportSelectedMatchTeamsCommand}" />
                </StackPanel>

                <Grid Margin="0,8,0,0">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="2*" />
                        <ColumnDefinition Width="3*" />
                    </Grid.ColumnDefinitions>
                    <StackPanel Grid.Column="0">
                        <TextBlock Text="赛事搜索结果" />
                        <ListBox ItemsSource="{Binding EventResults}" SelectedItem="{Binding SelectedEvent}" DisplayMemberPath="Name" MinHeight="120" />
                    </StackPanel>
                    <StackPanel Grid.Column="1" Margin="10,0,0,0">
                        <TextBlock Text="赛程列表" />
                        <ListBox ItemsSource="{Binding MatchResults}" SelectedItem="{Binding SelectedMatch}" MinHeight="120">
                            <ListBox.ItemTemplate>
                                <DataTemplate>
                                    <StackPanel Orientation="Horizontal">
                                        <TextBlock Text="主队：" />
                                        <TextBlock Text="{Binding HomeTeamName}" />
                                        <TextBlock Margin="10,0,0,0" Text="客队：" />
                                        <TextBlock Text="{Binding AwayTeamName}" />
                                        <TextBlock Margin="10,0,0,0" Text=" | 赛事：" />
                                        <TextBlock Text="{Binding EventName}" />
                                    </StackPanel>
                                </DataTemplate>
                            </ListBox.ItemTemplate>
                        </ListBox>
                    </StackPanel>
                </Grid>
            </StackPanel>
        </Border>
        <!--  main team  -->
        <Border DataContext="{Binding MainTeamInfoViewModel}" Style="{StaticResource Card}">
            <!--  basic info  -->
            <StackPanel>
                <StackPanel Orientation="Horizontal">
                    <TextBlock VerticalAlignment="Center" Text="{I18N {x:Static lang:LangKeys.HomeTeamInformation}}" />
                    <ui:Button
                        Margin="10,0,0,0"
                        Command="{Binding ImportInfoFromJsonCommand}"
                        Content="{I18N {x:Static lang:LangKeys.ImportFromJsonFile}}"
                        Icon="{ui:SymbolIcon Symbol=ArrowImport24}"
                        ToolTipService.InitialShowDelay="100"
                        ToolTipService.Placement="MousePoint"
                        ToolTipService.ToolTip="{I18N {x:Static lang:LangKeys.JsonImportTip}}" />
                </StackPanel>

                <StackPanel Margin="0,10,0,0" Orientation="Horizontal">
                    <ui:TextBox
                        Width="250"
                        PlaceholderText="{I18N {x:Static lang:LangKeys.TeamName}}"
                        Text="{Binding TeamName}" />
                    <ui:Button
                        Margin="10,0,0,0"
                        Command="{Binding ConfirmTeamNameCommand}"
                        Content="{I18N {x:Static lang:LangKeys.Confirm}}"
                        Icon="{ui:SymbolIcon Symbol=Checkmark24}" />
                </StackPanel>

                <StackPanel Orientation="Horizontal">
                    <ui:Button
                        Command="{Binding SetTeamLogoCommand}"
                        Content="{I18N {x:Static lang:LangKeys.SetTeamLogo}}"
                        Icon="{ui:SymbolIcon Symbol=ImageEdit24}" />
                    <ui:Image
                        Width="70"
                        Height="70"
                        Margin="20,10,0,10"
                        CornerRadius="8"
                        Source="{Binding CurrentTeam.Logo}"
                        Stretch="UniformToFill" />
                    <TextBlock
                        Width="150"
                        Margin="20,0,0,0"
                        VerticalAlignment="Center">
                        <Run Text="{I18N {x:Static lang:LangKeys.CurrentStatusColon}}" /><Run d:Text="求生者" Text="{Binding CurrentTeam.Camp, Converter={StaticResource CampToStringConverter}}" />
                    </TextBlock>

                </StackPanel>

                <!--  player edit  -->

                <!--  sur  -->
                <StackPanel>
                    <TextBlock Text="{I18N {x:Static lang:LangKeys.SurvivorPlayer}}" />
                    <ItemsControl Margin="0,10,0,0" ItemsSource="{Binding CurrentTeam.SurMemberList}">
                        <ItemsControl.ItemTemplate>
                            <DataTemplate>
                                <StackPanel Margin="0,0,0,10" Orientation="Horizontal">
                                    <ui:TextBox
                                        MinWidth="250"
                                        Margin="10,0,0,0"
                                        PlaceholderText="{I18N {x:Static lang:LangKeys.PlayerName}}"
                                        Text="{Binding Name}" />
                                    <ui:Button
                                        Margin="10,0,0,0"
                                        Command="{Binding RelativeSource={RelativeSource AncestorType=Border}, Path=DataContext.SetMemberImageCommand}"
                                        CommandParameter="{Binding}"
                                        Content="{I18N {x:Static lang:LangKeys.SetPhoto}}"
                                        Icon="{ui:SymbolIcon Symbol=ImageAdd24}" />
                                    <ui:Button
                                        Margin="10,0,0,0"
                                        Command="{Binding RelativeSource={RelativeSource AncestorType=Border}, Path=DataContext.ClearMemberImageCommand}"
                                        CommandParameter="{Binding}"
                                        Content="{I18N {x:Static lang:LangKeys.RemovePhoto}}"
                                        Icon="{ui:SymbolIcon Symbol=ImageOff24}"
                                        Visibility="{Binding IsImageValid, Converter={StaticResource BooleanToVisibilityConverter}}" />

                                    <ToggleButton
                                        Margin="10,0,0,0"
                                        Command="{Binding RelativeSource={RelativeSource AncestorType=Border}, Path=DataContext.SwitchMemberStateCommand}"
                                        CommandParameter="{Binding}"
                                        IsChecked="{Binding IsOnField}"
                                        IsEnabled="{Binding CanOnFieldChange}">
                                        <ToggleButton.Style>
                                            <Style BasedOn="{StaticResource {x:Type ToggleButton}}" TargetType="ToggleButton">
                                                <Setter Property="Background" Value="DarkGreen" />
                                                <Setter Property="Foreground" Value="White" />
                                                <Setter Property="Content">
                                                    <Setter.Value>
                                                        <StackPanel Orientation="Horizontal">
                                                            <ui:SymbolIcon Symbol="ArrowUpload24" />
                                                            <TextBlock Margin="10,0,0,0" Text="{I18N {x:Static lang:LangKeys.Enter}}" />
                                                        </StackPanel>
                                                    </Setter.Value>
                                                </Setter>
                                                <Style.Triggers>
                                                    <Trigger Property="IsChecked" Value="True">
                                                        <Setter Property="Background" Value="DarkRed" />
                                                        <Setter Property="Content">
                                                            <Setter.Value>
                                                                <StackPanel Orientation="Horizontal">
                                                                    <ui:SymbolIcon Symbol="ArrowDownload24" />
                                                                    <TextBlock Margin="10,0,0,0" Text="{I18N {x:Static lang:LangKeys.Exit}}" />
                                                                </StackPanel>
                                                            </Setter.Value>
                                                        </Setter>
                                                    </Trigger>
                                                </Style.Triggers>
                                            </Style>
                                        </ToggleButton.Style>
                                    </ToggleButton>
                                    <ui:Button
                                        Margin="10,0,0,0"
                                        Background="PaleVioletRed"
                                        Command="{Binding RelativeSource={RelativeSource AncestorType=Border}, Path=DataContext.RemoveSurMemberCommand}"
                                        CommandParameter="{Binding}"
                                        Content="{I18N {x:Static lang:LangKeys.Delete}}"
                                        Icon="{ui:SymbolIcon Symbol=Delete24}" />
                                </StackPanel>
                            </DataTemplate>
                        </ItemsControl.ItemTemplate>
                    </ItemsControl>
                    <ui:Button
                        Command="{Binding AddSurMemberCommand}"
                        Content="{I18N {x:Static lang:LangKeys.AddPlayer}}"
                        Icon="{ui:SymbolIcon Symbol=Add24}" />
                </StackPanel>
                <!--  hun  -->
                <StackPanel Margin="0,10,0,0">
                    <TextBlock Text="{I18N {x:Static lang:LangKeys.HunterPlayer}}" />
                    <ItemsControl Margin="0,10,0,0" ItemsSource="{Binding CurrentTeam.HunMemberList}">
                        <ItemsControl.ItemTemplate>
                            <DataTemplate>
                                <StackPanel Margin="10,0,0,10" Orientation="Horizontal">
                                    <ui:TextBox
                                        MinWidth="250"
                                        PlaceholderText="{I18N {x:Static lang:LangKeys.PlayerName}}"
                                        Text="{Binding Name}" />
                                    <ui:Button
                                        Margin="10,0,0,0"
                                        Command="{Binding RelativeSource={RelativeSource AncestorType=Border}, Path=DataContext.SetMemberImageCommand}"
                                        CommandParameter="{Binding}"
                                        Content="{I18N {x:Static lang:LangKeys.SetPhoto}}"
                                        Icon="{ui:SymbolIcon Symbol=ImageAdd24}" />
                                    <ui:Button
                                        Margin="10,0,0,0"
                                        Command="{Binding RelativeSource={RelativeSource AncestorType=Border}, Path=DataContext.ClearMemberImageCommand}"
                                        CommandParameter="{Binding}"
                                        Content="{I18N {x:Static lang:LangKeys.RemovePhoto}}"
                                        Icon="{ui:SymbolIcon Symbol=ImageOff24}"
                                        Visibility="{Binding IsImageValid, Converter={StaticResource BooleanToVisibilityConverter}}" />
                                    <ToggleButton
                                        Margin="10,0,0,0"
                                        Command="{Binding RelativeSource={RelativeSource AncestorType=Border}, Path=DataContext.SwitchMemberStateCommand}"
                                        CommandParameter="{Binding}"
                                        IsChecked="{Binding IsOnField}"
                                        IsEnabled="{Binding CanOnFieldChange}">
                                        <ToggleButton.Style>
                                            <Style BasedOn="{StaticResource {x:Type ToggleButton}}" TargetType="ToggleButton">
                                                <Setter Property="Background" Value="DarkGreen" />
                                                <Setter Property="Foreground" Value="White" />
                                                <Setter Property="Content">
                                                    <Setter.Value>
                                                        <StackPanel Orientation="Horizontal">
                                                            <ui:SymbolIcon Symbol="ArrowUpload24" />
                                                            <TextBlock Margin="10,0,0,0" Text="{I18N {x:Static lang:LangKeys.Enter}}" />
                                                        </StackPanel>
                                                    </Setter.Value>
                                                </Setter>
                                                <Style.Triggers>
                                                    <Trigger Property="IsChecked" Value="True">
                                                        <Setter Property="Background" Value="DarkRed" />
                                                        <Setter Property="Content">
                                                            <Setter.Value>
                                                                <StackPanel Orientation="Horizontal">
                                                                    <ui:SymbolIcon Symbol="ArrowDownload24" />
                                                                    <TextBlock Margin="10,0,0,0" Text="{I18N {x:Static lang:LangKeys.Exit}}" />
                                                                </StackPanel>
                                                            </Setter.Value>
                                                        </Setter>
                                                    </Trigger>
                                                </Style.Triggers>
                                            </Style>
                                        </ToggleButton.Style>
                                    </ToggleButton>
                                    <ui:Button
                                        Margin="10,0,0,0"
                                        Background="PaleVioletRed"
                                        Command="{Binding RelativeSource={RelativeSource AncestorType=Border}, Path=DataContext.RemoveHunMemberCommand}"
                                        CommandParameter="{Binding}"
                                        Content="{I18N {x:Static lang:LangKeys.Delete}}"
                                        Icon="{ui:SymbolIcon Symbol=Delete24}" />
                                </StackPanel>
                            </DataTemplate>
                        </ItemsControl.ItemTemplate>
                    </ItemsControl>
                    <ui:Button
                        Command="{Binding AddHunMemberCommand}"
                        Content="{I18N {x:Static lang:LangKeys.AddPlayer}}"
                        Icon="{ui:SymbolIcon Symbol=Add24}" />
                </StackPanel>
            </StackPanel>
        </Border>

        <!--  away team  -->
        <Border DataContext="{Binding AwayTeamInfoViewModel}" Style="{StaticResource Card}">
            <!--  basic info  -->
            <StackPanel>
                <StackPanel Orientation="Horizontal">
                    <TextBlock VerticalAlignment="Center" Text="{I18N {x:Static lang:LangKeys.AwayTeamInformation}}" />
                    <ui:Button
                        Margin="10,0,0,0"
                        Command="{Binding ImportInfoFromJsonCommand}"
                        Content="{I18N {x:Static lang:LangKeys.ImportFromJsonFile}}"
                        Icon="{ui:SymbolIcon Symbol=ArrowImport24}"
                        ToolTipService.InitialShowDelay="100"
                        ToolTipService.Placement="MousePoint"
                        ToolTipService.ToolTip="{I18N {x:Static lang:LangKeys.JsonImportTip}}" />
                </StackPanel>

                <StackPanel Margin="0,10,0,0" Orientation="Horizontal">
                    <ui:TextBox
                        Width="250"
                        PlaceholderText="{I18N {x:Static lang:LangKeys.TeamName}}"
                        Text="{Binding TeamName}" />
                    <ui:Button
                        Margin="10,0,0,0"
                        Command="{Binding ConfirmTeamNameCommand}"
                        Content="{I18N {x:Static lang:LangKeys.Confirm}}"
                        Icon="{ui:SymbolIcon Symbol=Checkmark24}" />
                </StackPanel>

                <StackPanel Orientation="Horizontal">
                    <ui:Button
                        Command="{Binding SetTeamLogoCommand}"
                        Content="{I18N {x:Static lang:LangKeys.SetTeamLogo}}"
                        Icon="{ui:SymbolIcon Symbol=ImageEdit24}" />
                    <ui:Image
                        Width="70"
                        Height="70"
                        Margin="20,10,0,10"
                        CornerRadius="8"
                        Source="{Binding CurrentTeam.Logo}"
                        Stretch="UniformToFill" />
                    <TextBlock
                        Width="150"
                        Margin="20,0,0,0"
                        VerticalAlignment="Center">
                        <Run Text="{I18N {x:Static lang:LangKeys.CurrentStatusColon}}" /><Run d:Text="监管者" Text="{Binding CurrentTeam.Camp, Converter={StaticResource CampToStringConverter}}" />
                    </TextBlock>
                </StackPanel>

                <!--  player edit  -->

                <!--  sur  -->
                <StackPanel>
                    <TextBlock Text="{I18N {x:Static lang:LangKeys.SurvivorPlayer}}" />
                    <ItemsControl Margin="0,10,0,0" ItemsSource="{Binding CurrentTeam.SurMemberList}">
                        <ItemsControl.ItemTemplate>
                            <DataTemplate>
                                <StackPanel Margin="0,0,0,10" Orientation="Horizontal">
                                    <ui:TextBox
                                        MinWidth="250"
                                        Margin="10,0,0,0"
                                        PlaceholderText="{I18N {x:Static lang:LangKeys.PlayerName}}"
                                        Text="{Binding Name}" />
                                    <ui:Button
                                        Margin="10,0,0,0"
                                        Command="{Binding RelativeSource={RelativeSource AncestorType=Border}, Path=DataContext.SetMemberImageCommand}"
                                        CommandParameter="{Binding}"
                                        Content="{I18N {x:Static lang:LangKeys.SetPhoto}}"
                                        Icon="{ui:SymbolIcon Symbol=ImageAdd24}" />
                                    <ui:Button
                                        Margin="10,0,0,0"
                                        Command="{Binding RelativeSource={RelativeSource AncestorType=Border}, Path=DataContext.ClearMemberImageCommand}"
                                        CommandParameter="{Binding}"
                                        Content="{I18N {x:Static lang:LangKeys.RemovePhoto}}"
                                        Icon="{ui:SymbolIcon Symbol=ImageOff24}"
                                        Visibility="{Binding IsImageValid, Converter={StaticResource BooleanToVisibilityConverter}}" />
                                    <ToggleButton
                                        Margin="10,0,0,0"
                                        Command="{Binding RelativeSource={RelativeSource AncestorType=Border}, Path=DataContext.SwitchMemberStateCommand}"
                                        CommandParameter="{Binding}"
                                        IsChecked="{Binding IsOnField}"
                                        IsEnabled="{Binding CanOnFieldChange}">
                                        <ToggleButton.Style>
                                            <Style BasedOn="{StaticResource {x:Type ToggleButton}}" TargetType="ToggleButton">
                                                <Setter Property="Background" Value="DarkGreen" />
                                                <Setter Property="Foreground" Value="White" />
                                                <Setter Property="Content">
                                                    <Setter.Value>
                                                        <StackPanel Orientation="Horizontal">
                                                            <ui:SymbolIcon Symbol="ArrowUpload24" />
                                                            <TextBlock Margin="10,0,0,0" Text="{I18N {x:Static lang:LangKeys.Enter}}" />
                                                        </StackPanel>
                                                    </Setter.Value>
                                                </Setter>
                                                <Style.Triggers>
                                                    <Trigger Property="IsChecked" Value="True">
                                                        <Setter Property="Background" Value="DarkRed" />
                                                        <Setter Property="Content">
                                                            <Setter.Value>
                                                                <StackPanel Orientation="Horizontal">
                                                                    <ui:SymbolIcon Symbol="ArrowDownload24" />
                                                                    <TextBlock Margin="10,0,0,0" Text="{I18N {x:Static lang:LangKeys.Exit}}" />
                                                                </StackPanel>
                                                            </Setter.Value>
                                                        </Setter>
                                                    </Trigger>
                                                </Style.Triggers>
                                            </Style>
                                        </ToggleButton.Style>
                                    </ToggleButton>
                                    <ui:Button
                                        Margin="10,0,0,0"
                                        Background="PaleVioletRed"
                                        Command="{Binding RelativeSource={RelativeSource AncestorType=Border}, Path=DataContext.RemoveSurMemberCommand}"
                                        CommandParameter="{Binding}"
                                        Content="{I18N {x:Static lang:LangKeys.Delete}}"
                                        Icon="{ui:SymbolIcon Symbol=Delete24}" />
                                </StackPanel>
                            </DataTemplate>
                        </ItemsControl.ItemTemplate>
                    </ItemsControl>
                    <StackPanel Orientation="Horizontal">
                        <ui:Button
                            Command="{Binding AddSurMemberCommand}"
                            Content="{I18N {x:Static lang:LangKeys.AddPlayer}}"
                            Icon="{ui:SymbolIcon Symbol=Add24}" />
                    </StackPanel>
                </StackPanel>
                <!--  hun  -->
                <StackPanel Margin="0,10,0,0">
                    <TextBlock Text="{I18N {x:Static lang:LangKeys.HunterPlayer}}" />
                    <ItemsControl Margin="0,10,0,0" ItemsSource="{Binding CurrentTeam.HunMemberList}">
                        <ItemsControl.ItemTemplate>
                            <DataTemplate>
                                <StackPanel
                                    Margin="10,0,0,10"
                                    Cursor=""
                                    Orientation="Horizontal">
                                    <ui:TextBox
                                        MinWidth="250"
                                        PlaceholderText="{I18N {x:Static lang:LangKeys.PlayerName}}"
                                        Text="{Binding Name}" />
                                    <ui:Button
                                        Margin="10,0,0,0"
                                        Command="{Binding RelativeSource={RelativeSource AncestorType=Border}, Path=DataContext.SetMemberImageCommand}"
                                        CommandParameter="{Binding}"
                                        Content="{I18N {x:Static lang:LangKeys.SetPhoto}}"
                                        Icon="{ui:SymbolIcon Symbol=ImageAdd24}" />
                                    <ui:Button
                                        Margin="10,0,0,0"
                                        Command="{Binding RelativeSource={RelativeSource AncestorType=Border}, Path=DataContext.ClearMemberImageCommand}"
                                        CommandParameter="{Binding}"
                                        Content="{I18N {x:Static lang:LangKeys.RemovePhoto}}"
                                        Icon="{ui:SymbolIcon Symbol=ImageOff24}"
                                        Visibility="{Binding IsImageValid, Converter={StaticResource BooleanToVisibilityConverter}}" />
                                    <ToggleButton
                                        Margin="10,0,0,0"
                                        Command="{Binding RelativeSource={RelativeSource AncestorType=Border}, Path=DataContext.SwitchMemberStateCommand}"
                                        CommandParameter="{Binding}"
                                        IsChecked="{Binding IsOnField}"
                                        IsEnabled="{Binding CanOnFieldChange}">
                                        <ToggleButton.Style>
                                            <Style BasedOn="{StaticResource {x:Type ToggleButton}}" TargetType="ToggleButton">
                                                <Setter Property="Background" Value="DarkGreen" />
                                                <Setter Property="Foreground" Value="White" />
                                                <Setter Property="Content">
                                                    <Setter.Value>
                                                        <StackPanel Orientation="Horizontal">
                                                            <ui:SymbolIcon Symbol="ArrowUpload24" />
                                                            <TextBlock Margin="10,0,0,0" Text="{I18N {x:Static lang:LangKeys.Enter}}" />
                                                        </StackPanel>
                                                    </Setter.Value>
                                                </Setter>
                                                <Style.Triggers>
                                                    <Trigger Property="IsChecked" Value="True">
                                                        <Setter Property="Background" Value="DarkRed" />
                                                        <Setter Property="Content">
                                                            <Setter.Value>
                                                                <StackPanel Orientation="Horizontal">
                                                                    <ui:SymbolIcon Symbol="ArrowDownload24" />
                                                                    <TextBlock Margin="10,0,0,0" Text="{I18N {x:Static lang:LangKeys.Exit}}" />
                                                                </StackPanel>
                                                            </Setter.Value>
                                                        </Setter>
                                                    </Trigger>
                                                </Style.Triggers>
                                            </Style>
                                        </ToggleButton.Style>
                                    </ToggleButton>
                                    <ui:Button
                                        Margin="10,0,0,0"
                                        Background="PaleVioletRed"
                                        Command="{Binding RelativeSource={RelativeSource AncestorType=Border}, Path=DataContext.RemoveHunMemberCommand}"
                                        CommandParameter="{Binding}"
                                        Content="{I18N {x:Static lang:LangKeys.Delete}}"
                                        Icon="{ui:SymbolIcon Symbol=Delete24}" />
                                </StackPanel>
                            </DataTemplate>
                        </ItemsControl.ItemTemplate>
                    </ItemsControl>
                    <ui:Button
                        Command="{Binding AddHunMemberCommand}"
                        Content="{I18N {x:Static lang:LangKeys.AddPlayer}}"
                        Icon="{ui:SymbolIcon Symbol=Add24}" />
                </StackPanel>
            </StackPanel>
        </Border>

        <!--  current  -->
        <Border
            Margin="0,0,10,10"
            Padding="10,10,10,10"
            HorizontalAlignment="Left"
            VerticalAlignment="Top"
            Background="{DynamicResource CardBackgroundFillColorDefaultBrush}"
            CornerRadius="8">
            <Border.Resources>
                <Style BasedOn="{StaticResource {x:Type ui:TextBox}}" TargetType="ui:TextBox">
                    <!--<Setter Property="PlaceholderText" Value="选手名称" /> -->
                    <Setter Property="MinWidth" Value="250" />
                    <Setter Property="IsReadOnly" Value="True" />
                    <Setter Property="HorizontalAlignment" Value="Left" />
                </Style>
                <Style BasedOn="{StaticResource {x:Type cc:CharacterChanger}}" TargetType="cc:CharacterChanger">
                    <Setter Property="Spacing" Value="10" />
                    <Setter Property="Margin" Value="10,0,0,0" />
                </Style>
            </Border.Resources>
            <StackPanel>
                <TextBlock Text="{I18N {x:Static lang:LangKeys.CurrentPlayerOnStage}}" />
                <TextBlock Margin="0,10,0,0" Text="{I18N {x:Static lang:LangKeys.Survivor}}" />
                <ItemsControl Margin="0,10,0,0" ItemsSource="{Binding OnFieldSurPlayerViewModels}">
                    <ItemsControl.ItemTemplate>
                        <DataTemplate>
                            <StackPanel Margin="0,0,0,10" Orientation="Horizontal">
                                <ui:TextBox Text="{Binding ThisPlayer.Member.Name}" PlaceholderText="{I18N {x:Static lang:LangKeys.PlayerName}}"/>
                                <cc:CharacterChanger Command="{Binding SwapMembersInPlayersCommand}" Index="{Binding Index}" />
                            </StackPanel>
                        </DataTemplate>
                    </ItemsControl.ItemTemplate>
                </ItemsControl>

                <TextBlock Margin="0,10,0,10" Text="{I18N {x:Static lang:LangKeys.Hunter}}" />
                <ui:TextBox Text="{Binding OnFieldHunPlayerVm.ThisPlayer.Member.Name}" PlaceholderText="{I18N {x:Static lang:LangKeys.PlayerName}}" />
            </StackPanel>
        </Border>
    </WrapPanel>
</Page>
