<ResourceDictionary
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:controls="clr-namespace:neo_bpsys_wpf.CustomControls"
    xmlns:cv="clr-namespace:neo_bpsys_wpf.Converter"
    xmlns:i="http://schemas.microsoft.com/xaml/behaviors"
    xmlns:ui="http://schemas.lepo.co/wpfui/2022/xaml">
    <cv:BooleanToReverseVisibilityConverter x:Key="BooleanToReverseVisibilityConverter" />
    <Style BasedOn="{StaticResource {x:Type ComboBox}}" TargetType="{x:Type controls:CharacterSelector}">
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type controls:CharacterSelector}">
                    <StackPanel Orientation="Horizontal">
                        <StackPanel>
                            <ComboBox
                                Width="150"
                                Height="35"
                                IsDropDownOpen="{Binding Path=IsDropDownOpen, RelativeSource={RelativeSource TemplatedParent}, Mode=TwoWay}"
                                IsEditable="True"
                                IsEnabled="{TemplateBinding IsEnabled}"
                                ItemsSource="{TemplateBinding ItemsSource}"
                                MaxDropDownHeight="200"
                                SelectedIndex="{TemplateBinding SelectedIndex}"
                                SelectedItem="{TemplateBinding SelectedItem}"
                                SelectedValue="{TemplateBinding SelectedValue}"
                                Text="{Binding Path=Text, RelativeSource={RelativeSource TemplatedParent}, Mode=TwoWay}" />
                            <Image
                                Width="100"
                                Height="100"
                                IsEnabled="{TemplateBinding IsEnabled}"
                                Source="{TemplateBinding ImageSource}"
                                Stretch="UniformToFill"
                                Visibility="{Binding Path=IsSimpleModeEnable, RelativeSource={RelativeSource TemplatedParent}, Mode=TwoWay, Converter={StaticResource BooleanToReverseVisibilityConverter}}" />
                        </StackPanel>
                        <ui:Button
                            Margin="10,0,0,0"
                            VerticalAlignment="Top"
                            Command="{TemplateBinding Command}"
                            CommandParameter="{Binding Name, RelativeSource={RelativeSource AncestorType={x:Type controls:CharacterSelector}}}"
                            Content="确认"
                            Icon="{ui:SymbolIcon Symbol=Checkmark24}"
                            IsEnabled="{TemplateBinding IsEnabled}"
                            Visibility="{Binding Path=IsSimpleModeEnable, RelativeSource={RelativeSource TemplatedParent}, Mode=TwoWay, Converter={StaticResource BooleanToReverseVisibilityConverter}}" />
                    </StackPanel>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>
</ResourceDictionary>