<ResourceDictionary
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:controls="clr-namespace:neo_bpsys_wpf.CustomControls"
    xmlns:i="http://schemas.microsoft.com/xaml/behaviors"
    xmlns:ui="http://schemas.lepo.co/wpfui/2022/xaml">
    <Style BasedOn="{StaticResource {x:Type ComboBox}}" TargetType="{x:Type controls:CharacterSelector}">
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type controls:CharacterSelector}">
                    <StackPanel Orientation="Horizontal">
                        <StackPanel>
                            <ComboBox
                                Width="150"
                                Height="35"
                                IsDropDownOpen="{Binding Path=IsDropDownOpen, RelativeSource={RelativeSource TemplatedParent}, Mode=TwoWay}"
                                IsEditable="True"
                                IsEnabled="{Binding Path=IsEnabled, RelativeSource={RelativeSource TemplatedParent}, Mode=TwoWay}"
                                IsTextSearchEnabled="{Binding Path=IsTextSearchEnabled, RelativeSource={RelativeSource TemplatedParent}, Mode=TwoWay}"
                                ItemsSource="{Binding Path=ItemsSource, RelativeSource={RelativeSource TemplatedParent}, Mode=TwoWay}"
                                MaxDropDownHeight="200"
                                SelectedIndex="{Binding Path=SelectedIndex, RelativeSource={RelativeSource TemplatedParent}, Mode=TwoWay}"
                                SelectedItem="{Binding Path=SelectedItem, RelativeSource={RelativeSource TemplatedParent}, Mode=TwoWay}"
                                SelectedValue="{Binding Path=SelectedValue, RelativeSource={RelativeSource TemplatedParent}, Mode=TwoWay}"
                                SelectedValuePath="{Binding Path=SelectedValuePath, RelativeSource={RelativeSource TemplatedParent}, Mode=TwoWay}"
                                Text="{Binding Path=Text, RelativeSource={RelativeSource TemplatedParent}, Mode=TwoWay}" />
                            <Image
                                Width="100"
                                Height="100"
                                IsEnabled="{Binding Path=IsEnabled, RelativeSource={RelativeSource TemplatedParent}, Mode=TwoWay}"
                                Source="{TemplateBinding ImageSource}"
                                Stretch="UniformToFill" />
                        </StackPanel>
                        <ui:Button
                            Margin="10,0,0,0"
                            VerticalAlignment="Top"
                            Command="{TemplateBinding Command}"
                            CommandParameter="{Binding Name, RelativeSource={RelativeSource AncestorType={x:Type controls:CharacterSelector}}}"
                            Content="确认"
                            Icon="{ui:SymbolIcon Symbol=Checkmark24}"
                            IsEnabled="{Binding Path=IsEnabled, RelativeSource={RelativeSource TemplatedParent}, Mode=TwoWay}" />
                    </StackPanel>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>
</ResourceDictionary>